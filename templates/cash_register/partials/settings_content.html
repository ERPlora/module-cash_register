{% load i18n djicons %}

<div class="p-4">
    <!-- Session Status -->
    <div class="card mb-4">
        <div class="card-body flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl flex items-center justify-center {% if open_session %}bg-success/10{% else %}bg-gray-500/10{% endif %}">
                {% if open_session %}
                {% icon "lock-open-outline" css_class="text-xl text-success" %}
                {% else %}
                {% icon "lock-closed-outline" css_class="text-xl text-muted" %}
                {% endif %}
            </div>
            <div>
                <div class="text-lg font-bold">{% if open_session %}{% trans "Session Open" %}{% else %}{% trans "Session Closed" %}{% endif %}</div>
                <div class="text-xs text-muted">{% trans "Current cash session status" %}</div>
            </div>
        </div>
    </div>

    <!-- Module Settings -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">{% icon "settings-outline" css_class="text-primary" %} {% trans "Settings" %}</h3>
        </div>
        <form id="settings-form"
              hx-post="{% url 'cash_register:settings' %}"
              hx-target="#save-status"
              hx-swap="innerHTML"
              hx-trigger="change delay:500ms">
            {% csrf_token %}
            <div class="list">
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Enable Cash Register" %}</div>
                        <div class="list-item-note">{% trans "Require an open cash session to use the POS" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="enable_cash_register"
                                   {% if config.enable_cash_register %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Require Opening Balance" %}</div>
                        <div class="list-item-note">{% trans "Require manual cash count when opening a session" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="require_opening_balance"
                                   {% if config.require_opening_balance %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Require Closing Balance" %}</div>
                        <div class="list-item-note">{% trans "Require manual cash count when closing a session" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="require_closing_balance"
                                   {% if config.require_closing_balance %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Allow Negative Balance" %}</div>
                        <div class="list-item-note">{% trans "Allow negative cash balance in register" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="allow_negative_balance"
                                   {% if config.allow_negative_balance %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Auto Open on Login" %}</div>
                        <div class="list-item-note">{% trans "Automatically open a cash session when user logs in" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="auto_open_session_on_login"
                                   {% if config.auto_open_session_on_login %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
                <div class="list-item">
                    <div class="list-item-content">
                        <div class="list-item-label">{% trans "Auto Close on Logout" %}</div>
                        <div class="list-item-note">{% trans "Automatically close session when user logs out" %}</div>
                    </div>
                    <div class="list-item-end">
                        <label class="toggle color-success">
                            <input type="checkbox" name="auto_close_session_on_logout"
                                   {% if config.auto_close_session_on_logout %}checked{% endif %}>
                            <span class="toggle-track"><span class="toggle-thumb"></span></span>
                        </label>
                    </div>
                </div>
            </div>

            <div id="save-status" class="text-center p-2"></div>
        </form>
    </div>
</div>
